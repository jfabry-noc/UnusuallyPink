<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>iso on Unusually Pink</title>
    <link>https://hugo.unusually.pink/tags/iso/</link>
    <description>Recent content in iso on Unusually Pink</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>2021</copyright>
    <lastBuildDate>Mon, 08 Jun 2020 00:00:00 +0000</lastBuildDate><atom:link href="https://hugo.unusually.pink/tags/iso/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Groovy Programming: Creating an ISO Date at a Specific Date and Time in UTC</title>
      <link>https://hugo.unusually.pink/groovy-programming-creating-an-iso-date-at-a-specific-date-and-time-in-utc/</link>
      <pubDate>Mon, 08 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>https://hugo.unusually.pink/groovy-programming-creating-an-iso-date-at-a-specific-date-and-time-in-utc/</guid>
      <description>I&amp;rsquo;ll be the first to admit that the title of this post is a bit too verbose, but if someone else had a post online with a title like this it could&amp;rsquo;ve potentially saved me a lot of time. Here&amp;rsquo;s to hoping it helps someone else in their search.
As is mentioned on my personal website, I do a lot of PowerShell and Python scripting for work. Recently, though, I started working in Groovy due to the fact that it&amp;rsquo;s treated as a first-class language in a system I&amp;rsquo;ve been integrating SaaS applications into.</description>
      <content>&lt;p&gt;I&amp;rsquo;ll be the first to admit that the title of this post is a &lt;strong&gt;bit&lt;/strong&gt; too verbose, but if someone else had a post online with a title like this it could&amp;rsquo;ve potentially saved me a lot of time. Here&amp;rsquo;s to hoping it helps someone else in their search.&lt;/p&gt;
&lt;p&gt;As is mentioned on my &lt;a href=&#34;https://jfabhd.com/&#34;&gt;personal website&lt;/a&gt;, I do a lot of PowerShell and Python scripting for work. Recently, though, I started working in Groovy due to the fact that it&amp;rsquo;s treated as a first-class language in a system I&amp;rsquo;ve been integrating SaaS applications into. Without going into a big tl;dr, working in Groovy affords me a lot of convenience, security, and speed benefits. I just had to, you know, learn Groovy. Since there was a sale at Udemy at the time, I ended up snagging &lt;a href=&#34;https://www.udemy.com/course/apache-groovy/&#34;&gt;The Complete Apache Groovy Developer Course&lt;/a&gt;. It wasn&amp;rsquo;t a bad course in getting me up to speed; I went from never using Groovy (though I did use Java, upon which Groovy is based, &lt;em&gt;many&lt;/em&gt; years ago in college) to being able to get things done for work with it in about 4 nights of binge-watching the course. Be warned, though, that some of the material is a little dated. For example, the way to build JSON objects covered in the course seems to have been superseded by a far easier method, and when covering REST API requests the instructor opted to use some janky 3rd party library that at the time of this writing hadn&amp;rsquo;t been updated in 6 years or something crazy. I was able to do some searches online and leverage Java tutorials to just figure out how to natively handle REST API calls; your mileage my vary with that depending on your comfort level with REST APIs.&lt;/p&gt;
&lt;p&gt;One thing not covered in the course that I needed, though, was how to create a date object in a specific format (ISO) at a specific time (the first day of the current month) in a specific timezone (UTC.) This is a common need for me when filtering time-based events if true time UUIDs aren&amp;rsquo;t available. The key in my experience is to figure out how to get the timezone correct at the creation of the object when you need a specific hour; adjusting the timezone after the fact will result in a new offset that&amp;rsquo;ll make your hour value incorrect.&lt;/p&gt;
&lt;p&gt;Being super out of the loop with Java and very new to Groovy, this was a little tricky for me, and it seemed like no one else I was able to find online had my specific need. So after a couple of hours of throwing spaghetti at a virtual wall (i.e. copying and pasting lots of stuff from &lt;a href=&#34;https://stackoverflow.com/&#34;&gt;Stack Overflow&lt;/a&gt;) I eventually got to this; it&amp;rsquo;s probably &lt;a href=&#34;https://gist.github.com/JFFail/dabd6ab1334fb00bfe5e089d8072ac3c&#34;&gt;easier to read at the Gist link&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;TimeZone&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;setDefault&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;TimeZone&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getTimeZone&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;UTC&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;))&lt;/span&gt;
Integer year &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Calendar&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getInstance&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;().&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;Calendar&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;YEAR&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
Integer month &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Calendar&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getInstance&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;().&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;Calendar&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;MONTH&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
def then &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; GregorianCalendar&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;year&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; month&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; 1&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; 0&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; 0&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; 0&lt;span style=&#34;color:#f92672&#34;&gt;).&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// Desired format: 2020-06-01T00:00:00.000000+00:00
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;thenISO &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; then&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;format&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;yyyy-MM-dd&amp;#39;T&amp;#39;HH:mm:ss.SSSZ&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; TimeZone&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getTimeZone&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UTC&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;))&lt;/span&gt; 
thenISOFixed &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; thenISO&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;0&lt;span style=&#34;color:#f92672&#34;&gt;..&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;thenISO&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; 3&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;:00&amp;#34;&lt;/span&gt;
println thenISOFixed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I essentially needed to take the current month and year in order to create a date object at midnight (00:00:00) on the first of the month. I need that to be in UTC, and the resulting string representation needs to be in ISO format. All of this gets me what I need so that I can plug it into an API URL for time-based filtering.&lt;/p&gt;
&lt;p&gt;Everything works pretty much like you&amp;rsquo;d expect, though the format specified on line 6 gives me the offset for UTC as &lt;code&gt;0000&lt;/code&gt;. The endpoint I was passing the data to wanted it to be &lt;code&gt;00:00&lt;/code&gt;. Since I knew I&amp;rsquo;d always have no offsett, I just took a range of the string that cut off the last two zeroes so that I could replace them with &amp;ldquo;:00.&amp;rdquo; I probably could&amp;rsquo;ve done this slightly fancier with some type of &amp;ldquo;00$&amp;rdquo; regex replacement, but this works fine.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m far from the Groovy master, so as much as I hope this is helpful to someone who finds themselves in the same situation I was in, I&amp;rsquo;d equally welcome someone showing me the better way to do it if one exists. Regardless, hopefully someone else out there will bang their head against the keyboard for a shorter amount of time thanks to this. And if you happen to know a better way, feel free to give me a shout!&lt;/p&gt;
&lt;p&gt;Keep coding, and stay &lt;code&gt;#FF66CC&lt;/code&gt;!&lt;/p&gt;
</content>
    </item>
    
  </channel>
</rss>
